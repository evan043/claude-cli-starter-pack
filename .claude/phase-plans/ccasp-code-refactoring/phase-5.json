{
  "plan_id": "ccasp-code-refactoring-phase-5",
  "phase_id": "phase-5",
  "roadmap_slug": "ccasp-code-refactoring",
  "project_name": "Vision Orchestrator Decomposition",
  "scale": "L",
  "target_success": 0.95,
  "status": "pending",
  "agent_assignments": {
    "suggested": ["l2-backend-specialist"],
    "current": []
  },
  "phases": [
    {
      "id": 1,
      "name": "Vision Orchestrator Decomposition",
      "status": "pending",
      "tasks": [
        {
          "id": "5.1",
          "description": "Identify the 8 subsystem domains in orchestrator.js and map functions to domains",
          "details": "Read src/vision/orchestrator.js (1900 LOC) and create a function-to-domain mapping. Expected domains: analysis (code analysis orchestration), security (security scanning), architecture (architecture planning), autonomous (autonomous execution), execution (task execution), monitoring (progress monitoring), lifecycle (start/stop/pause), config (configuration management).",
          "completed": false,
          "agent": "l2-backend-specialist",
          "files": ["src/vision/orchestrator.js"]
        },
        {
          "id": "5.2",
          "description": "Extract analysis/security/architecture orchestration into vision/orchestrators/{analysis,security,architecture}.js",
          "details": "Move analysis, security, and architecture orchestration functions into dedicated modules under src/vision/orchestrators/. Each module should be self-contained with clear inputs/outputs. Target <350 lines each.",
          "completed": false,
          "agent": "l2-backend-specialist",
          "files": ["src/vision/orchestrator.js", "src/vision/orchestrators/"]
        },
        {
          "id": "5.3",
          "description": "Extract autonomous/execution orchestration into vision/orchestrators/{autonomous,execution,monitoring}.js",
          "details": "Move autonomous execution, task execution, and monitoring functions into dedicated modules. These handle the runtime behavior of the vision system. Target <350 lines each.",
          "completed": false,
          "agent": "l2-backend-specialist",
          "files": ["src/vision/orchestrator.js", "src/vision/orchestrators/"]
        },
        {
          "id": "5.4",
          "description": "Reduce orchestrator.js to thin coordinator (<400 lines) importing domain modules",
          "details": "After extracting all domain-specific functions, reduce orchestrator.js to a coordinator that: imports all domain modules, exposes the original API surface, delegates to appropriate domain modules based on operation type. Target <400 lines.",
          "completed": false,
          "agent": "l2-backend-specialist",
          "files": ["src/vision/orchestrator.js"]
        },
        {
          "id": "5.5",
          "description": "Run npm test - verify 135/135 still pass after vision decomposition",
          "completed": false,
          "testing": {
            "type": "e2e",
            "command": "npm test"
          }
        }
      ],
      "success_criteria": [
        "orchestrator.js reduced from 1900 to <400 lines",
        "6 domain modules created under vision/orchestrators/",
        "Each domain module <350 lines",
        "All original exports preserved",
        "135/135 tests pass"
      ]
    }
  ],
  "testing_config": {
    "ralph_loop": {
      "enabled": true,
      "maxIterations": 10,
      "testCommand": "npm test"
    }
  }
}
