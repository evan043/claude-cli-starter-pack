# Template Variables Reference

This document catalogs all variables used in CCASP templates and their sources.

## Overview

CCASP templates support two variable syntaxes:
- **Handlebars** (`{{variable}}`) - Populated from `tech-stack.json` and `settings.json`
- **Path Variables** (`${VAR}`) - System paths resolved at runtime

---

## Handlebars Variables ({{variable}})

These variables are populated from `.claude/config/tech-stack.json` (generated by `ccasp detect-stack`) and `.claude/settings.json`.

### Frontend

| Variable | Source | Type | Description | Example |
|----------|--------|------|-------------|---------|
| `{{frontend.framework}}` | tech-stack.json | string | Detected frontend framework | `react`, `vue`, `angular`, `svelte` |
| `{{frontend.buildTool}}` | tech-stack.json | string | Build tool detected | `vite`, `webpack`, `turbopack` |
| `{{frontend.stateManager}}` | tech-stack.json | string | State management library | `zustand`, `redux`, `pinia`, `mobx` |
| `{{frontend.styling}}` | tech-stack.json | string | Styling approach | `tailwind`, `styled-components`, `emotion` |
| `{{frontend.port}}` | tech-stack.json | number | Dev server port | `5173`, `3000`, `5174` |
| `{{frontend.devCommand}}` | tech-stack.json | string | Dev server command | `npm run dev` |
| `{{frontend.buildCommand}}` | tech-stack.json | string | Build command | `npm run build` |

### Backend

| Variable | Source | Type | Description | Example |
|----------|--------|------|-------------|---------|
| `{{backend.framework}}` | tech-stack.json | string | Backend framework | `fastapi`, `express`, `nestjs`, `django` |
| `{{backend.language}}` | tech-stack.json | string | Backend language | `python`, `javascript`, `typescript` |
| `{{backend.port}}` | tech-stack.json | number | Backend server port | `8000`, `3001`, `8001` |
| `{{backend.packageManager}}` | tech-stack.json | string | Package manager | `pip`, `npm`, `yarn`, `pnpm` |
| `{{backend.runtime}}` | tech-stack.json | string | Runtime environment | `node`, `python`, `deno` |

### Database

| Variable | Source | Type | Description | Example |
|----------|--------|------|-------------|---------|
| `{{database.primary}}` | tech-stack.json | string | Primary database | `postgresql`, `mysql`, `mongodb`, `sqlite` |
| `{{database.orm}}` | tech-stack.json | string | ORM/Query builder | `prisma`, `sqlalchemy`, `typeorm`, `drizzle` |
| `{{database.migrations}}` | tech-stack.json | string | Migration tool | `alembic`, `prisma`, `typeorm` |

### Testing

| Variable | Source | Type | Description | Example |
|----------|--------|------|-------------|---------|
| `{{testing.e2e.framework}}` | tech-stack.json | string | E2E testing framework | `playwright`, `cypress`, `puppeteer` |
| `{{testing.e2e.command}}` | tech-stack.json | string | E2E test command | `npx playwright test` |
| `{{testing.e2e.configFile}}` | tech-stack.json | string | E2E config file path | `playwright.config.ts` |
| `{{testing.unit.framework}}` | tech-stack.json | string | Unit testing framework | `vitest`, `jest`, `pytest`, `mocha` |
| `{{testing.unit.command}}` | tech-stack.json | string | Unit test command | `npm test` |

### Deployment

| Variable | Source | Type | Description | Example |
|----------|--------|------|-------------|---------|
| `{{deployment.backend.platform}}` | tech-stack.json | string | Backend deployment platform | `railway`, `vercel`, `render`, `fly` |
| `{{deployment.backend.serviceName}}` | tech-stack.json | string | Backend service name | `my-api` |
| `{{deployment.backend.productionUrl}}` | tech-stack.json | string | Production backend URL | `https://api.example.com` |
| `{{deployment.backend.projectId}}` | settings.json | string | Platform-specific project ID | Railway project ID |
| `{{deployment.backend.serviceId}}` | settings.json | string | Platform-specific service ID | Railway service ID |
| `{{deployment.backend.environmentId}}` | settings.json | string | Platform-specific environment ID | Railway environment ID |
| `{{deployment.frontend.platform}}` | tech-stack.json | string | Frontend deployment platform | `cloudflare`, `vercel`, `netlify` |
| `{{deployment.frontend.project}}` | settings.json | string | Frontend project name | `my-app` |
| `{{deployment.frontend.productionUrl}}` | tech-stack.json | string | Production frontend URL | `https://example.com` |

### Version Control

| Variable | Source | Type | Description | Example |
|----------|--------|------|-------------|---------|
| `{{versionControl.platform}}` | tech-stack.json | string | Git hosting platform | `github`, `gitlab`, `bitbucket` |
| `{{versionControl.owner}}` | tech-stack.json | string | Repository owner | `username` |
| `{{versionControl.repo}}` | tech-stack.json | string | Repository name | `my-project` |
| `{{versionControl.defaultBranch}}` | tech-stack.json | string | Default branch name | `main`, `master` |
| `{{versionControl.remoteUrl}}` | tech-stack.json | string | Git remote URL | `git@github.com:user/repo.git` |

### Project Info

| Variable | Source | Type | Description | Example |
|----------|--------|------|-------------|---------|
| `{{projectInfo.name}}` | tech-stack.json | string | Project name | `my-awesome-app` |
| `{{projectInfo.description}}` | package.json | string | Project description | From package.json description |
| `{{projectInfo.version}}` | package.json | string | Project version | `1.0.0` |

### Tunnel Configuration

| Variable | Source | Type | Description | Example |
|----------|--------|------|-------------|---------|
| `{{tunnel.service}}` | settings.json | string | Tunnel service | `ngrok`, `cloudflare-tunnel` |
| `{{tunnel.subdomain}}` | settings.json | string | Tunnel subdomain | `my-app` |
| `{{tunnel.authToken}}` | settings.json | string | Tunnel auth token | (stored securely) |

### GitHub Project

| Variable | Source | Type | Description | Example |
|----------|--------|------|-------------|---------|
| `{{github.projectNumber}}` | settings.json | number | GitHub Project Board number | `1` |
| `{{github.projectId}}` | settings.json | string | GitHub Project GraphQL ID | `PVT_kwDOABCDEF` |

### Generated Metadata

| Variable | Source | Type | Description | Example |
|----------|--------|------|-------------|---------|
| `{{generated}}` | runtime | string | Generation timestamp | `2026-02-05T19:00:00Z` |

---

## Path Variables (${VAR})

These variables are resolved at runtime and point to system directories.

| Variable | Value | Description | Example |
|----------|-------|-------------|---------|
| `${CWD}` | `process.cwd()` | Current working directory (project root) | `/path/to/project` |
| `${HOME}` | `os.homedir()` | User home directory | `/home/username` or `C:\Users\username` |
| `${CLAUDE_DIR}` | `${CWD}/.claude` | Claude configuration directory | `/path/to/project/.claude` |
| `${TEMP}` | `os.tmpdir()` | System temp directory | `/tmp` or `C:\Temp` |

### Usage in Templates

```bash
# Load configuration from project
cat "${CLAUDE_DIR}/settings.json"

# Import from installed package
import { loadVision } from '${CWD}/node_modules/claude-cli-advanced-starter-pack/src/vision/index.js';

# Run command in project root
cd "${CWD}" && npm test
```

---

## Conditional Variables

Handlebars templates support conditional rendering with helpers:

### if/unless

```handlebars
{{#if deployment.backend.platform}}
Backend will deploy to {{deployment.backend.platform}}
{{/if}}

{{#unless frontend.framework}}
No frontend framework detected.
{{/unless}}
```

### eq (equals comparison)

```handlebars
{{#if (eq frontend.framework "react")}}
React-specific configuration
{{/if}}

{{#if (eq deployment.backend.platform "railway")}}
Railway deployment detected
{{/if}}
```

### Nested paths

```handlebars
{{#if testing.e2e.framework}}
Run E2E tests: {{testing.e2e.command}}
{{/if}}
```

---

## Variable Sources

### 1. tech-stack.json

Generated by `ccasp detect-stack` or `ccasp init`. Located at `.claude/config/tech-stack.json`.

**Detection methods:**
- Scans `package.json` dependencies
- Checks config files (vite.config.ts, next.config.js, etc.)
- Analyzes directory structure
- Reads git remote URLs

**Update command:**
```bash
ccasp detect-stack
```

### 2. settings.json

Created during `ccasp init` or manually configured. Located at `.claude/settings.json`.

**Stored data:**
- Deployment IDs (Railway, Cloudflare projects)
- GitHub Project Board settings
- Tunnel configurations
- MCP server credentials

**Manual configuration:**
```bash
/ccasp-setup  # Interactive configuration
```

### 3. Runtime Environment

Path variables (`${VAR}`) are resolved when commands execute.

---

## Using Variables in Custom Templates

### In Slash Commands (.md)

```markdown
---
description: My custom command
---

# My Command

Your project uses {{frontend.framework}} with {{backend.framework}}.

Run tests:
\`\`\`bash
cd "${CWD}"
{{testing.unit.command}}
\`\`\`
```

### In Hooks (.js)

```javascript
export default {
  async run(context) {
    const techStack = context.readJSON('${CLAUDE_DIR}/config/tech-stack.json');
    const framework = techStack.frontend.framework;

    console.log(`Frontend: ${framework}`);
  }
};
```

### In Agent Prompts

```markdown
You are a {{backend.framework}} specialist working on {{projectInfo.name}}.

Stack:
- Frontend: {{frontend.framework}}
- Database: {{database.primary}} with {{database.orm}}
- Testing: {{testing.e2e.framework}}
```

---

## Default Values

When a variable is not detected, it remains as an empty string or is omitted from conditionals.

**Example:**
```handlebars
{{#if frontend.stateManager}}
State management: {{frontend.stateManager}}
{{else}}
No state manager detected. Consider Zustand or Redux.
{{/if}}
```

---

## Regenerating Variables

To update all variables after project changes:

```bash
# Re-detect tech stack
ccasp detect-stack

# Re-initialize (preserves customizations)
ccasp init

# Force full refresh
ccasp init --force
```

---

## Variable Validation

Use `/detect-tech-stack` to verify variable detection:

```bash
/detect-tech-stack
```

Shows all detected values with confidence scores and detection sources.

---

## Next Steps

- [View Template Index](./INDEX.md)
- [View Hook Index](./hooks/INDEX.md)
- [Read CLAUDE.md](../CLAUDE.md) for architecture
- [Check tech-stack detection patterns](../src/commands/tech-stack/patterns.js)
